<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>News & Jobs - Vidyavantra</title>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
      min-height: 100vh;
    }

    /* Header */
    .header {
      background: white;
      padding: 20px 0;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-content {
      max-width: 1200px;
      margin: 0 auto;
      padding: 0 20px;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .logo {
      font-size: 1.8rem;
      font-weight: bold;
      background: linear-gradient(45deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .nav-tabs {
      display: flex;
      gap: 30px;
    }

    .nav-tab {
      padding: 10px 20px;
      background: none;
      border: none;
      font-size: 1rem;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      border-radius: 25px;
      transition: all 0.3s ease;
      position: relative;
    }

    .nav-tab.active {
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
    }

    .nav-tab:hover:not(.active) {
      background: #f8f9fa;
      color: #333;
    }

    /* Main Container */
    .main-container {
      max-width: 1200px;
      margin: 0 auto;
      padding: 40px 20px;
    }

    /* Search Section */
    .search-section {
      background: white;
      padding: 30px;
      border-radius: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      margin-bottom: 40px;
    }

    .search-header {
      text-align: center;
      margin-bottom: 30px;
    }

    .search-title {
      font-size: 2rem;
      color: #333;
      margin-bottom: 10px;
    }

    .search-subtitle {
      color: #666;
      font-size: 1.1rem;
    }

    .search-form {
      display: grid;
      grid-template-columns: 1fr auto;
      gap: 15px;
      margin-bottom: 25px;
    }

    .search-input {
      padding: 15px 20px;
      border: 2px solid #e1e5e9;
      border-radius: 50px;
      font-size: 1rem;
      outline: none;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }

    .search-btn {
      padding: 15px 30px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 50px;
      font-size: 1rem;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .search-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.3);
    }

    /* Filters */
    .filters {
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      justify-content: center;
    }

    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 5px;
    }

    .filter-label {
      font-size: 0.9rem;
      color: #666;
      font-weight: 500;
    }

    .filter-select {
      padding: 10px 15px;
      border: 2px solid #e1e5e9;
      border-radius: 10px;
      font-size: 0.9rem;
      outline: none;
      background: white;
      cursor: pointer;
      transition: border-color 0.3s ease;
    }

    .filter-select:focus {
      border-color: #667eea;
    }

    /* Content Sections */
    .content-section {
      display: none;
    }

    .content-section.active {
      display: block;
    }

    /* News Section */
    .news-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 30px;
    }

    .news-card {
      background: white;
      border-radius: 15px;
      overflow: hidden;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .news-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 35px rgba(0, 0, 0, 0.15);
    }

    .news-image {
      width: 100%;
      height: 200px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3rem;
      color: white;
    }

    .news-content {
      padding: 25px;
    }

    .news-category {
      display: inline-block;
      padding: 5px 12px;
      background: #e3f2fd;
      color: #1976d2;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
      margin-bottom: 15px;
    }

    .news-title {
      font-size: 1.3rem;
      color: #333;
      margin-bottom: 10px;
      line-height: 1.4;
    }

    .news-excerpt {
      color: #666;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 15px;
    }

    .news-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.85rem;
      color: #999;
    }

    .news-date {
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .news-actions {
      display: flex;
      gap: 10px;
    }

    .action-btn {
      background: none;
      border: none;
      color: #666;
      cursor: pointer;
      padding: 5px;
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .action-btn:hover {
      background: #f1f3f4;
      color: #667eea;
    }

    /* Jobs Section */
    .jobs-grid {
      display: grid;
      gap: 20px;
    }

    .job-card {
      background: white;
      padding: 25px;
      border-radius: 15px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.08);
      transition: all 0.3s ease;
      cursor: pointer;
    }

    .job-card:hover {
      transform: translateY(-3px);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.12);
    }

    .job-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 20px;
    }

    .job-info {
      flex: 1;
    }

    .job-title {
      font-size: 1.4rem;
      color: #333;
      margin-bottom: 8px;
      font-weight: 600;
    }

    .job-company {
      color: #667eea;
      font-size: 1.1rem;
      font-weight: 500;
      margin-bottom: 5px;
    }

    .job-location {
      color: #666;
      font-size: 0.95rem;
      display: flex;
      align-items: center;
      gap: 5px;
    }

    .job-logo {
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.5rem;
      font-weight: bold;
    }

    .job-details {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .job-detail {
      display: flex;
      align-items: center;
      gap: 8px;
      color: #666;
      font-size: 0.9rem;
    }

    .job-tags {
      display: flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    .job-tag {
      padding: 6px 12px;
      background: #f1f3f4;
      color: #333;
      border-radius: 20px;
      font-size: 0.8rem;
      font-weight: 500;
    }

    .job-description {
      color: #666;
      font-size: 0.95rem;
      line-height: 1.6;
      margin-bottom: 20px;
    }

    .job-footer {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .job-salary {
      font-size: 1.1rem;
      font-weight: 600;
      color: #28a745;
    }

    .job-actions {
      display: flex;
      gap: 10px;
    }

    .apply-btn {
      padding: 10px 20px;
      background: linear-gradient(45deg, #667eea, #764ba2);
      color: white;
      border: none;
      border-radius: 25px;
      font-size: 0.9rem;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .apply-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(102, 126, 234, 0.3);
    }

    .save-btn {
      padding: 10px 15px;
      background: white;
      color: #667eea;
      border: 2px solid #667eea;
      border-radius: 25px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .save-btn:hover {
      background: #667eea;
      color: white;
    }

    /* No Results */
    .no-results {
      text-align: center;
      padding: 60px 20px;
      color: #666;
    }

    .no-results-icon {
      font-size: 4rem;
      margin-bottom: 20px;
    }

    .no-results-title {
      font-size: 1.5rem;
      margin-bottom: 10px;
      color: #333;
    }

    .no-results-text {
      font-size: 1rem;
      line-height: 1.6;
    }

    /* Loading */
    .loading {
      text-align: center;
      padding: 40px;
      color: #666;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 4px solid #e1e5e9;
      border-top: 4px solid #667eea;
      border-radius: 50%;
      animation: spin 1s linear infinite;
      margin: 0 auto 20px;
    }

    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }

    @keyframes slideInRight {
      from {
        transform: translateX(100%);
        opacity: 0;
      }
      to {
        transform: translateX(0);
        opacity: 1;
      }
    }

    @keyframes slideOutRight {
      from {
        transform: translateX(0);
        opacity: 1;
      }
      to {
        transform: translateX(100%);
        opacity: 0;
      }
    }

    .refresh-btn {
      background: linear-gradient(45deg, #28a745, #20c997) !important;
      color: white !important;
    }

    .refresh-btn:hover {
      background: linear-gradient(45deg, #218838, #1ea085) !important;
      transform: rotate(180deg);
      transition: all 0.3s ease;
    }

    /* Responsive Design */
    @media (max-width: 768px) {
      .header-content {
        flex-direction: column;
        gap: 20px;
      }

      .nav-tabs {
        gap: 15px;
      }

      .nav-tab {
        padding: 8px 15px;
        font-size: 0.9rem;
      }

      .search-form {
        grid-template-columns: 1fr;
      }

      .filters {
        justify-content: flex-start;
      }

      .news-grid {
        grid-template-columns: 1fr;
      }

      .job-header {
        flex-direction: column;
        gap: 15px;
      }

      .job-details {
        flex-direction: column;
        gap: 10px;
      }

      .job-footer {
        flex-direction: column;
        gap: 15px;
        align-items: flex-start;
      }
    }

    @media (max-width: 480px) {
      .main-container {
        padding: 20px 10px;
      }

      .search-section {
        padding: 20px;
      }

      .search-title {
        font-size: 1.5rem;
      }

      .news-content {
        padding: 20px;
      }

      .job-card {
        padding: 20px;
      }
    }
</style>
  <style>
    /* News Modal Styles */
    .news-modal-overlay {
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.45);
      z-index: 2000;
      display: none;
      align-items: center;
      justify-content: center;
      transition: opacity 0.2s;
    }
    .news-modal-overlay.active {
      display: flex;
    }
    .news-modal {
      background: #fff;
      border-radius: 18px;
      max-width: 600px;
      width: 95vw;
      box-shadow: 0 8px 40px rgba(0,0,0,0.18);
      padding: 0;
      overflow: hidden;
      animation: modalIn 0.25s cubic-bezier(.4,2,.6,1);
      position: relative;
    }
    @keyframes modalIn {
      from { transform: translateY(60px) scale(0.95); opacity: 0; }
      to { transform: none; opacity: 1; }
    }
    .news-modal-header {
      padding: 24px 28px 0 28px;
      background: #f5f7fa;
    }
    .news-modal-title {
      font-size: 1.5rem;
      font-weight: 700;
      color: #333;
      margin-bottom: 10px;
    }
    .news-modal-meta {
      color: #888;
      font-size: 0.95rem;
      margin-bottom: 10px;
    }
    .news-modal-image {
      width: 100%;
      height: 240px;
      object-fit: cover;
      background: #e3e3e3;
      display: block;
    }
    .news-modal-content {
      padding: 24px 28px 28px 28px;
      color: #444;
      font-size: 1.08rem;
      line-height: 1.7;
    }
    .news-modal-link {
      display: inline-block;
      margin-top: 18px;
      color: #667eea;
      font-weight: 600;
      text-decoration: none;
      transition: color 0.2s;
    }
    .news-modal-link:hover {
      color: #764ba2;
      text-decoration: underline;
    }
    .news-modal-close {
      position: absolute;
      top: 18px;
      right: 18px;
      background: none;
      border: none;
      font-size: 1.7rem;
      color: #888;
      cursor: pointer;
      z-index: 10;
      transition: color 0.2s;
    }
    .news-modal-close:hover {
      color: #ff4757;
    }
  </style>
  <!-- News Article Modal -->
  <div id="newsModalOverlay" class="news-modal-overlay" onclick="closeNewsModal(event)">
    <div class="news-modal" onclick="event.stopPropagation()">
      <button class="news-modal-close" onclick="closeNewsModal(event)">&times;</button>
      <div class="news-modal-header">
        <div id="newsModalImageContainer"></div>
        <div class="news-modal-title" id="newsModalTitle"></div>
        <div class="news-modal-meta" id="newsModalMeta"></div>
      </div>
      <div class="news-modal-content" id="newsModalContent"></div>
      <a class="news-modal-link" id="newsModalLink" href="#" target="_blank" rel="noopener">Read full article &rarr;</a>
    </div>
  </div>
</head>
<body>
  <!-- Header -->
  <header class="header">
    <div class="header-content">
      <div style="display:flex; align-items:center; gap:12px;">
        <div class="logo">Vidyavantra</div>
        <button onclick="window.location.href='/'" style="padding:6px 10px; border-radius:8px; border:none; background:#667eea; color:#fff; cursor:pointer;">Home</button>
      </div>
      <div class="nav-tabs">
        <button class="nav-tab active" onclick="switchTab('news')">üì∞ News</button>
        <button class="nav-tab" onclick="switchTab('jobs')">üíº Jobs</button>
        <button class="nav-tab refresh-btn" onclick="refreshContent()" title="Refresh with latest trends">üîÑ Refresh</button>
      </div>
    </div>
  </header>

  <!-- Main Container -->
  <div class="main-container">
    <!-- Search Section -->
    <div class="search-section">
      <div class="search-header">
        <h1 class="search-title" id="searchTitle">Latest Tech News & Insights</h1>
        <p class="search-subtitle" id="searchSubtitle">Stay updated with the latest technology trends and industry news</p>
      </div>

      <div class="search-form">
        <input type="text" class="search-input" id="searchInput" placeholder="Search news articles...">
        <button class="search-btn" onclick="performSearch()">üîç Search</button>
      </div>

      <div class="filters" id="filters">
  <!-- News Filters Removed -->

        <!-- Job Filters -->
        <div class="job-filters" style="display: none;">
          <div class="filter-group">
            <label class="filter-label">Location</label>
            <select class="filter-select" id="jobLocation">
              <option value="">All Locations</option>
              <option value="remote">Remote</option>
              <option value="new-york">New York</option>
              <option value="san-francisco">San Francisco</option>
              <option value="london">London</option>
              <option value="bangalore">Bangalore</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label">Experience</label>
            <select class="filter-select" id="jobExperience">
              <option value="">All Levels</option>
              <option value="entry">Entry Level</option>
              <option value="mid">Mid Level</option>
              <option value="senior">Senior Level</option>
              <option value="lead">Lead/Manager</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label">Job Type</label>
            <select class="filter-select" id="jobType">
              <option value="">All Types</option>
              <option value="full-time">Full Time</option>
              <option value="part-time">Part Time</option>
              <option value="contract">Contract</option>
              <option value="freelance">Freelance</option>
            </select>
          </div>

          <div class="filter-group">
            <label class="filter-label">Salary Range</label>
            <select class="filter-select" id="jobSalary">
              <option value="">All Ranges</option>
              <option value="0-50k">$0 - $50k</option>
              <option value="50k-100k">$50k - $100k</option>
              <option value="100k-150k">$100k - $150k</option>
              <option value="150k+">$150k+</option>
            </select>
          </div>
        </div>
      </div>
    </div>

    <!-- News Section -->
    <div class="content-section active" id="newsSection">
      <div class="news-grid" id="newsGrid">
        <!-- News articles will be populated here -->
      </div>
    </div>

    <!-- Jobs Section -->
    <div class="content-section" id="jobsSection">
      <div class="jobs-grid" id="jobsGrid">
        <!-- Job listings will be populated here -->
      </div>
    </div>
  </div>

  <script>
    let currentTab = 'news';
    let newsData = [];
    let jobsData = [];
    let filteredNews = [];
    let filteredJobs = [];

    // Dynamic news data - fetched from trending topics
    let dynamicNews = [];
    
    // Generate trending news based on current world trends
    function generateTrendingNews() {
      const currentDate = new Date();
      const trends = [
        {
          keywords: ["AI", "ChatGPT", "OpenAI", "Machine Learning"],
          category: "technology",
          icon: "ü§ñ"
        },
        {
          keywords: ["Remote Work", "Hybrid", "Work from Home", "Digital Nomad"],
          category: "career",
          icon: "üè†"
        },
        {
          keywords: ["Cybersecurity", "Data Privacy", "Security Breach", "Encryption"],
          category: "technology",
          icon: "üîí"
        },
        {
          keywords: ["Climate Tech", "Green Energy", "Sustainability", "Carbon Neutral"],
          category: "industry",
          icon: "üå±"
        },
        {
          keywords: ["Web3", "Blockchain", "NFT", "Cryptocurrency"],
          category: "technology",
          icon: "‚õìÔ∏è"
        },
        {
          keywords: ["Mental Health", "Work-Life Balance", "Burnout", "Wellness"],
          category: "career",
          icon: "üß†"
        },
        {
          keywords: ["Quantum Computing", "5G", "Edge Computing", "IoT"],
          category: "technology",
          icon: "‚ö°"
        },
        {
          keywords: ["Skills Gap", "Upskilling", "Reskilling", "Continuous Learning"],
          category: "education",
          icon: "üìö"
        }
      ];

      const newsTemplates = [
        {
          titleTemplate: "Breaking: {keyword} Revolutionizes {industry} Industry",
          excerptTemplate: "Latest developments in {keyword} are transforming how {industry} professionals work and learn, creating new opportunities and challenges.",
        },
        {
          titleTemplate: "{keyword} Trends That Will Shape 2024 and Beyond",
          excerptTemplate: "Industry experts predict {keyword} will be a game-changer this year, with significant implications for career development and business strategy.",
        },
        {
          titleTemplate: "How {keyword} is Changing the Future of Work",
          excerptTemplate: "Companies worldwide are adopting {keyword} technologies to improve efficiency, reduce costs, and create better employee experiences.",
        },
        {
          titleTemplate: "The Ultimate Guide to {keyword} for Professionals",
          excerptTemplate: "Everything you need to know about {keyword} to stay competitive in today's rapidly evolving job market and advance your career.",
        },
        {
          titleTemplate: "{keyword} Skills in High Demand: Market Analysis 2024",
          excerptTemplate: "New research reveals {keyword} expertise is among the most sought-after skills, with salaries increasing by up to 40% year-over-year.",
        }
      ];

      const industries = ["Tech", "Healthcare", "Finance", "Education", "Manufacturing", "Retail", "Media"];
      
      return trends.map((trend, index) => {
        const template = newsTemplates[Math.floor(Math.random() * newsTemplates.length)];
        const keyword = trend.keywords[Math.floor(Math.random() * trend.keywords.length)];
        const industry = industries[Math.floor(Math.random() * industries.length)];
        
        const daysAgo = Math.floor(Math.random() * 7);
        const articleDate = new Date(currentDate);
        articleDate.setDate(articleDate.getDate() - daysAgo);
        
        return {
          id: index + 1,
          title: template.titleTemplate.replace(/{keyword}/g, keyword).replace(/{industry}/g, industry),
          excerpt: template.excerptTemplate.replace(/{keyword}/g, keyword).replace(/{industry}/g, industry),
          category: trend.category,
          date: articleDate.toISOString().split('T')[0],
          image: trend.icon,
          readTime: `${Math.floor(Math.random() * 8) + 3} min read`,
          trending: Math.random() > 0.5,
          views: Math.floor(Math.random() * 10000) + 1000
        };
      });
    }

    // Dynamic jobs data - generated based on current market trends
    let dynamicJobs = [];
    
    // Generate trending jobs based on current market demands
    function generateTrendingJobs() {
      const jobRoles = [
        {
          titles: ["AI Engineer", "Machine Learning Engineer", "AI Research Scientist", "ML Ops Engineer"],
          skills: ["Python", "TensorFlow", "PyTorch", "Machine Learning", "Deep Learning", "NLP"],
          salaryRange: [90000, 180000],
          companies: ["OpenAI", "Google AI", "Microsoft", "Meta AI", "NVIDIA"],
          demand: "high"
        },
        {
          titles: ["Cybersecurity Analyst", "Security Engineer", "Penetration Tester", "CISO"],
          skills: ["Cybersecurity", "Ethical Hacking", "CISSP", "Network Security", "Cloud Security"],
          salaryRange: [75000, 160000],
          companies: ["CrowdStrike", "Palo Alto", "FireEye", "Cisco", "IBM Security"],
          demand: "high"
        },
        {
          titles: ["Cloud Architect", "DevOps Engineer", "Site Reliability Engineer", "Platform Engineer"],
          skills: ["AWS", "Azure", "GCP", "Kubernetes", "Docker", "Terraform", "CI/CD"],
          salaryRange: [85000, 170000],
          companies: ["Amazon", "Microsoft", "Google Cloud", "HashiCorp", "Red Hat"],
          demand: "high"
        },
        {
          titles: ["Data Scientist", "Data Engineer", "Analytics Engineer", "Business Intelligence Developer"],
          skills: ["Python", "SQL", "Tableau", "Power BI", "Spark", "Hadoop", "Statistics"],
          salaryRange: [70000, 150000],
          companies: ["Snowflake", "Databricks", "Palantir", "Tableau", "Looker"],
          demand: "high"
        },
        {
          titles: ["Full Stack Developer", "Frontend Developer", "Backend Developer", "React Developer"],
          skills: ["React", "Node.js", "TypeScript", "JavaScript", "Python", "Next.js"],
          salaryRange: [60000, 140000],
          companies: ["Vercel", "Netlify", "Stripe", "Shopify", "Airbnb"],
          demand: "medium"
        },
        {
          titles: ["Product Manager", "Senior Product Manager", "Product Owner", "Growth Product Manager"],
          skills: ["Product Strategy", "Agile", "Analytics", "A/B Testing", "User Research"],
          salaryRange: [80000, 160000],
          companies: ["Meta", "Google", "Apple", "Netflix", "Uber"],
          demand: "medium"
        },
        {
          titles: ["UX Designer", "UI/UX Designer", "Product Designer", "Design Systems Lead"],
          skills: ["Figma", "Adobe XD", "Sketch", "Prototyping", "User Research", "Design Systems"],
          salaryRange: [65000, 130000],
          companies: ["Figma", "Adobe", "Canva", "Spotify", "Dropbox"],
          demand: "medium"
        },
        {
          titles: ["Blockchain Developer", "Web3 Developer", "Smart Contract Developer", "DeFi Engineer"],
          skills: ["Solidity", "Web3.js", "Ethereum", "Smart Contracts", "DeFi", "NFTs"],
          salaryRange: [80000, 180000],
          companies: ["Coinbase", "Binance", "ConsenSys", "Chainlink", "Polygon"],
          demand: "emerging"
        }
      ];

      const locations = [
        "San Francisco, CA", "New York, NY", "Seattle, WA", "Austin, TX", "Boston, MA",
        "London, UK", "Berlin, Germany", "Toronto, Canada", "Singapore", "Remote",
        "Bangalore, India", "Tel Aviv, Israel", "Amsterdam, Netherlands", "Sydney, Australia"
      ];

      const jobTypes = ["full-time", "part-time", "contract", "freelance"];
      const experienceLevels = ["entry", "mid", "senior", "lead"];
      
      const jobDescriptions = [
        "Join our innovative team and work on cutting-edge projects that impact millions of users worldwide.",
        "We're looking for passionate professionals to help us build the future of technology.",
        "Exciting opportunity to work with industry-leading technologies and make a real difference.",
        "Be part of a fast-growing company that values innovation, creativity, and professional growth.",
        "Work alongside talented engineers and designers in a collaborative, remote-first environment.",
        "Help us scale our platform and deliver exceptional experiences to our global user base.",
        "Join a mission-driven company focused on solving complex problems with elegant solutions.",
        "Opportunity to work with the latest technologies while mentoring junior team members."
      ];

      return jobRoles.flatMap((role, roleIndex) => {
        const numJobs = Math.floor(Math.random() * 3) + 2; // 2-4 jobs per role
        
        return Array.from({ length: numJobs }, (_, jobIndex) => {
          const title = role.titles[Math.floor(Math.random() * role.titles.length)];
          const company = role.companies[Math.floor(Math.random() * role.companies.length)];
          const location = locations[Math.floor(Math.random() * locations.length)];
          const type = jobTypes[Math.floor(Math.random() * jobTypes.length)];
          const experience = experienceLevels[Math.floor(Math.random() * experienceLevels.length)];
          
          // Adjust salary based on experience level
          let [minSalary, maxSalary] = role.salaryRange;
          switch(experience) {
            case 'entry':
              minSalary = Math.floor(minSalary * 0.7);
              maxSalary = Math.floor(maxSalary * 0.8);
              break;
            case 'senior':
              minSalary = Math.floor(minSalary * 1.2);
              maxSalary = Math.floor(maxSalary * 1.3);
              break;
            case 'lead':
              minSalary = Math.floor(minSalary * 1.4);
              maxSalary = Math.floor(maxSalary * 1.5);
              break;
          }
          
          // Adjust for location
          if (location.includes('San Francisco') || location.includes('New York')) {
            minSalary = Math.floor(minSalary * 1.2);
            maxSalary = Math.floor(maxSalary * 1.2);
          } else if (location === 'Remote') {
            minSalary = Math.floor(minSalary * 1.1);
            maxSalary = Math.floor(maxSalary * 1.1);
          }
          
          const skills = role.skills.slice(0, Math.floor(Math.random() * 3) + 3); // 3-5 skills
          const description = jobDescriptions[Math.floor(Math.random() * jobDescriptions.length)];
          const daysAgo = Math.floor(Math.random() * 14) + 1;
          
          let postedText;
          if (daysAgo === 1) postedText = "1 day ago";
          else if (daysAgo < 7) postedText = `${daysAgo} days ago`;
          else if (daysAgo === 7) postedText = "1 week ago";
          else postedText = `${Math.floor(daysAgo / 7)} weeks ago`;
          
          return {
            id: roleIndex * 10 + jobIndex + 1,
            title,
            company,
            location,
            type,
            experience,
            salary: `$${minSalary.toLocaleString()} - $${maxSalary.toLocaleString()}`,
            tags: skills,
            description,
            posted: postedText,
            logo: company.substring(0, 2).toUpperCase(),
            demand: role.demand,
            isNew: daysAgo <= 3,
            isUrgent: Math.random() > 0.8
          };
        });
      });
    }

    // Initialize data with dynamic content
    async function initializeData() {
      showLoading();
      try {
        // Fetch news
        const newsResp = await fetch('/api/news');
        const newsJson = await newsResp.json();
        let tempNews = (newsJson.articles || []).map((article, idx) => ({
          id: idx + 1,
          title: article.title || '',
          excerpt: article.description || '',
          category: article.source && article.source.name ? article.source.name : '',
          date: article.publishedAt ? article.publishedAt.split('T')[0] : '',
          image: article.urlToImage || '',
          readTime: '5 min read',
          trending: false,
          views: 0,
          url: article.url || '#'
        }));
        // Remove duplicates by title
        const seenTitles = new Set();
        newsData = tempNews.filter(n => {
          if (seenTitles.has(n.title)) return false;
          seenTitles.add(n.title);
          return true;
        });
      } catch (e) {
        newsData = [];
      }
      try {
        // Fetch jobs (default: developer in India)
        const jobsResp = await fetch('/api/jobs');
        const jobsJson = await jobsResp.json();
        let tempJobs = (jobsJson.jobs || []).map((job, idx) => ({
          id: idx + 1,
          title: job.title || '',
          company: job.company.display_name || '',
          location: job.location.display_name || '',
          type: job.contract_type || 'full-time',
          experience: job.category && job.category.label ? job.category.label : '',
          salary: job.salary_min && job.salary_max ? `‚Çπ${Math.round(job.salary_min).toLocaleString()} - ‚Çπ${Math.round(job.salary_max).toLocaleString()}` : 'N/A',
          tags: job.category && job.category.label ? [job.category.label] : [],
          description: job.description || '',
          posted: job.created ? formatDate(job.created) : '',
          logo: job.company.display_name ? job.company.display_name.substring(0,2).toUpperCase() : '',
          demand: '',
          isNew: false,
          isUrgent: false,
          url: job.redirect_url || '#'
        }));
        // Remove duplicates by title + company
        const seenJobs = new Set();
        jobsData = tempJobs.filter(j => {
          const key = j.title + '|' + j.company;
          if (seenJobs.has(key)) return false;
          seenJobs.add(key);
          return true;
        });
      } catch (e) {
        jobsData = [];
      }
      filteredNews = [...newsData];
      filteredJobs = [...jobsData];
      hideLoading();
      renderContent();
      showRefreshNotification();
    }

    // Refresh content with latest real-time data
    async function refreshContent() {
      showLoading();
      try {
        // Fetch news
        const newsResp = await fetch('/api/news');
        const newsJson = await newsResp.json();
        let tempNews = (newsJson.articles || []).map((article, idx) => ({
          id: idx + 1,
          title: article.title || '',
          excerpt: article.description || '',
          category: article.source && article.source.name ? article.source.name : '',
          date: article.publishedAt ? article.publishedAt.split('T')[0] : '',
          image: article.urlToImage || '',
          readTime: '5 min read',
          trending: false,
          views: 0,
          url: article.url || '#'
        }));
        // Remove duplicates by title
        const seenTitles = new Set();
        newsData = tempNews.filter(n => {
          if (seenTitles.has(n.title)) return false;
          seenTitles.add(n.title);
          return true;
        });
      } catch (e) {
        newsData = [];
      }
      try {
        // Fetch jobs (default: developer in India)
        const jobsResp = await fetch('/api/jobs');
        const jobsJson = await jobsResp.json();
        let tempJobs = (jobsJson.jobs || []).map((job, idx) => ({
          id: idx + 1,
          title: job.title || '',
          company: job.company.display_name || '',
          location: job.location.display_name || '',
          type: job.contract_type || 'full-time',
          experience: job.category && job.category.label ? job.category.label : '',
          salary: job.salary_min && job.salary_max ? `‚Çπ${Math.round(job.salary_min).toLocaleString()} - ‚Çπ${Math.round(job.salary_max).toLocaleString()}` : 'N/A',
          tags: job.category && job.category.label ? [job.category.label] : [],
          description: job.description || '',
          posted: job.created ? formatDate(job.created) : '',
          logo: job.company.display_name ? job.company.display_name.substring(0,2).toUpperCase() : '',
          demand: '',
          isNew: false,
          isUrgent: false,
          url: job.redirect_url || '#'
        }));
        // Remove duplicates by title + company
        const seenJobs = new Set();
        jobsData = tempJobs.filter(j => {
          const key = j.title + '|' + j.company;
          if (seenJobs.has(key)) return false;
          seenJobs.add(key);
          return true;
        });
      } catch (e) {
        jobsData = [];
      }
      filteredNews = [...newsData];
      filteredJobs = [...jobsData];
      hideLoading();
      renderContent();
      showRefreshNotification();
    }

    // Show loading state
    function showLoading() {
      const loadingHTML = `
        <div class="loading">
          <div class="loading-spinner"></div>
          <p>Loading latest ${currentTab === 'news' ? 'news articles' : 'job opportunities'}...</p>
        </div>
      `;
      
      if (currentTab === 'news') {
        document.getElementById('newsGrid').innerHTML = loadingHTML;
      } else {
        document.getElementById('jobsGrid').innerHTML = loadingHTML;
      }
    }

    // Hide loading state
    function hideLoading() {
      // Loading will be replaced by content in renderContent()
    }

    // Show refresh notification
    function showRefreshNotification() {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        right: 20px;
        background: linear-gradient(45deg, #667eea, #764ba2);
        color: white;
        padding: 15px 20px;
        border-radius: 10px;
        box-shadow: 0 5px 20px rgba(0,0,0,0.2);
        z-index: 1000;
        animation: slideInRight 0.3s ease;
      `;
      notification.innerHTML = `
        <div style="display: flex; align-items: center; gap: 10px;">
          <span>üîÑ</span>
          <span>Content updated with latest trends!</span>
        </div>
      `;
      
      document.body.appendChild(notification);
      
      setTimeout(() => {
        notification.style.animation = 'slideOutRight 0.3s ease';
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    // Switch tabs
    function switchTab(tab) {
      currentTab = tab;
      
      // Update tab buttons
      document.querySelectorAll('.nav-tab').forEach(btn => btn.classList.remove('active'));
      event.target.classList.add('active');
      
      // Update content sections
      document.querySelectorAll('.content-section').forEach(section => section.classList.remove('active'));
      document.getElementById(tab + 'Section').classList.add('active');
      
      // Update search section
      updateSearchSection();
      
      // Update filters
      updateFilters();
      
      // Render content
      renderContent();
    }

    // Update search section based on current tab
    function updateSearchSection() {
      const searchTitle = document.getElementById('searchTitle');
      const searchSubtitle = document.getElementById('searchSubtitle');
      const searchInput = document.getElementById('searchInput');
      
      if (currentTab === 'news') {
        searchTitle.textContent = 'Latest Tech News & Insights';
        searchSubtitle.textContent = 'Stay updated with the latest technology trends and industry news';
        searchInput.placeholder = 'Search news articles...';
      } else {
        searchTitle.textContent = 'Find Your Dream Job';
        searchSubtitle.textContent = 'Discover exciting career opportunities from top companies worldwide';
        searchInput.placeholder = 'Search jobs by title, company, or skills...';
      }
    }

    // Update filters based on current tab
    function updateFilters() {
      const newsFilters = document.querySelector('.news-filters');
      const jobFilters = document.querySelector('.job-filters');
      
      if (currentTab === 'news') {
        newsFilters.style.display = 'block';
        jobFilters.style.display = 'none';
      } else {
        newsFilters.style.display = 'none';
        jobFilters.style.display = 'flex';
      }
    }

    // Perform search
    function performSearch() {
      const searchTerm = document.getElementById('searchInput').value.toLowerCase();
      
      if (currentTab === 'news') {
        filteredNews = newsData.filter(article => 
          article.title.toLowerCase().includes(searchTerm) ||
          article.excerpt.toLowerCase().includes(searchTerm) ||
          article.category.toLowerCase().includes(searchTerm)
        );
      } else {
        filteredJobs = jobsData.filter(job => 
          job.title.toLowerCase().includes(searchTerm) ||
          job.company.toLowerCase().includes(searchTerm) ||
          job.description.toLowerCase().includes(searchTerm) ||
          job.tags.some(tag => tag.toLowerCase().includes(searchTerm))
        );
      }
      
      applyFilters();
      renderContent();
    }

    // Apply filters
    function applyFilters() {
  if (currentTab !== 'news') {
        const location = document.getElementById('jobLocation').value;
        const experience = document.getElementById('jobExperience').value;
        const type = document.getElementById('jobType').value;
        const salary = document.getElementById('jobSalary').value;
        
        if (location) {
          filteredJobs = filteredJobs.filter(job => 
            job.location.toLowerCase().includes(location) || location === 'remote' && job.location.toLowerCase().includes('remote')
          );
        }
        
        if (experience) {
          filteredJobs = filteredJobs.filter(job => job.experience === experience);
        }
        
        if (type) {
          filteredJobs = filteredJobs.filter(job => job.type === type);
        }
        
        if (salary) {
          // Simple salary filtering logic
          filteredJobs = filteredJobs.filter(job => {
            const jobSalary = job.salary.toLowerCase();
            switch(salary) {
              case '0-50k': return jobSalary.includes('50,000') || jobSalary.includes('40,000') || jobSalary.includes('30,000');
              case '50k-100k': return jobSalary.includes('80,000') || jobSalary.includes('70,000') || jobSalary.includes('60,000');
              case '100k-150k': return jobSalary.includes('120,000') || jobSalary.includes('130,000') || jobSalary.includes('100,000');
              case '150k+': return jobSalary.includes('150,000') || jobSalary.includes('200,000');
              default: return true;
            }
          });
        }
      }
    }

    // Render content
    function renderContent() {
      if (currentTab === 'news') {
        renderNews();
      } else {
        renderJobs();
      }
    }

    // Render news articles
    function renderNews() {
      const newsGrid = document.getElementById('newsGrid');
      
      if (filteredNews.length === 0) {
        newsGrid.innerHTML = `
          <div class="no-results">
            <div class="no-results-icon">üì∞</div>
            <h3 class="no-results-title">No articles found</h3>
            <p class="no-results-text">Try adjusting your search terms or filters to find more articles.</p>
          </div>
        `;
        return;
      }
      
      newsGrid.innerHTML = filteredNews.map(article => `
        <div class="news-card" onclick="openArticle(${article.id})">
          <div class="news-image">${article.image}</div>
          <div class="news-content">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
              <span class="news-category">${article.category.charAt(0).toUpperCase() + article.category.slice(1)}</span>
              ${article.trending ? '<span style="background: #ff4757; color: white; padding: 4px 8px; border-radius: 12px; font-size: 0.7rem; font-weight: 600;">üî• TRENDING</span>' : ''}
            </div>
            <h3 class="news-title">${article.title}</h3>
            <p class="news-excerpt">${article.excerpt}</p>
            <div class="news-meta">
              <div class="news-date">
                üìÖ ${formatDate(article.date)} ‚Ä¢ ${article.readTime} ${article.views ? `‚Ä¢ ${article.views.toLocaleString()} views` : ''}
              </div>
              <div class="news-actions">
                <button class="action-btn" onclick="event.stopPropagation(); saveArticle(${article.id})" title="Save">üíæ</button>
                <button class="action-btn" onclick="event.stopPropagation(); shareArticle(${article.id})" title="Share">üì§</button>
              </div>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Render job listings
    function renderJobs() {
      const jobsGrid = document.getElementById('jobsGrid');
      
      if (filteredJobs.length === 0) {
        jobsGrid.innerHTML = `
          <div class="no-results">
            <div class="no-results-icon">üíº</div>
            <h3 class="no-results-title">No jobs found</h3>
            <p class="no-results-text">Try adjusting your search terms or filters to find more opportunities.</p>
          </div>
        `;
        return;
      }
      
      jobsGrid.innerHTML = filteredJobs.map(job => `
        <div class="job-card" onclick="openJob(${job.id})">
          <div class="job-header">
            <div class="job-info">
              <div style="display: flex; align-items: center; gap: 10px; margin-bottom: 8px;">
                <h3 class="job-title" style="margin: 0;">${job.title}</h3>
                ${job.isNew ? '<span style="background: #2ecc71; color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 600;">NEW</span>' : ''}
                ${job.isUrgent ? '<span style="background: #e74c3c; color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 600;">URGENT</span>' : ''}
                ${job.demand === 'high' ? '<span style="background: #f39c12; color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 600;">üî• HIGH DEMAND</span>' : ''}
                ${job.demand === 'emerging' ? '<span style="background: #9b59b6; color: white; padding: 3px 8px; border-radius: 10px; font-size: 0.7rem; font-weight: 600;">üöÄ EMERGING</span>' : ''}
              </div>
              <div class="job-company">${job.company}</div>
              <div class="job-location">üìç ${job.location}</div>
            </div>
            <div class="job-logo">${job.logo}</div>
          </div>
          
          <div class="job-details">
            <div class="job-detail">‚è∞ ${job.type.charAt(0).toUpperCase() + job.type.slice(1).replace('-', ' ')}</div>
            <div class="job-detail">üë®‚Äçüíº ${job.experience.charAt(0).toUpperCase() + job.experience.slice(1)} Level</div>
            <div class="job-detail">üìÖ Posted ${job.posted}</div>
          </div>
          
          <div class="job-tags">
            ${job.tags.map(tag => `<span class="job-tag">${tag}</span>`).join('')}
          </div>
          
          <p class="job-description">${job.description}</p>
          
          <div class="job-footer">
            <div class="job-salary">${job.salary}</div>
            <div class="job-actions">
              <button class="apply-btn" onclick="event.stopPropagation(); applyToJob(${job.id})">Apply Now</button>
              <button class="save-btn" onclick="event.stopPropagation(); saveJob(${job.id})">üíæ Save</button>
            </div>
          </div>
        </div>
      `).join('');
    }

    // Utility functions
    function formatDate(dateString) {
      const date = new Date(dateString);
      return date.toLocaleDateString('en-US', { 
        month: 'short', 
        day: 'numeric', 
        year: 'numeric' 
      });
    }

    // Event handlers
    function openArticle(id) {
      // Find the article in filteredNews or newsData
      const article = (filteredNews || newsData || []).find(a => a.id === id);
      if (!article) {
        alert('Article not found.');
        return;
      }
      // Populate modal fields
      document.getElementById('newsModalTitle').textContent = article.title;
      document.getElementById('newsModalMeta').textContent = `${article.category ? article.category.charAt(0).toUpperCase() + article.category.slice(1) + ' ‚Ä¢ ' : ''}${formatDate(article.date)}${article.readTime ? ' ‚Ä¢ ' + article.readTime : ''}${article.views ? ' ‚Ä¢ ' + article.views.toLocaleString() + ' views' : ''}`;
      // Image
      let imgHtml = '';
      if (article.image && article.image.startsWith('http')) {
        imgHtml = `<img src="${article.image}" alt="${article.title}" class="news-modal-image">`;
      } else if (article.image) {
        imgHtml = `<div class="news-modal-image" style="display:flex;align-items:center;justify-content:center;font-size:3rem;color:#fff;background:#667eea;">${article.image}</div>`;
      } else {
        imgHtml = `<div class="news-modal-image" style="display:flex;align-items:center;justify-content:center;font-size:3rem;color:#fff;background:#667eea;">üì∞</div>`;
      }
      document.getElementById('newsModalImageContainer').innerHTML = imgHtml;
      // Content
      document.getElementById('newsModalContent').innerHTML = article.content || article.excerpt || '';
      // Link
      const link = document.getElementById('newsModalLink');
      if (article.url && article.url.startsWith('http')) {
        link.href = article.url;
        link.style.display = 'inline-block';
      } else {
        link.href = '#';
        link.style.display = 'none';
      }
      // Show modal
      document.getElementById('newsModalOverlay').classList.add('active');
    }

    function closeNewsModal(event) {
      if (event) event.preventDefault();
      document.getElementById('newsModalOverlay').classList.remove('active');
    }

    async function saveArticle(id) {
      try {
        const article = (filteredNews || newsData || []).find(a => a.id === id);
        if (!article) {
          alert('Article not found.');
          return;
        }
        const resp = await fetch('/api/user/saves', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          credentials: 'same-origin',
          body: JSON.stringify({
            resource_type: 'news',
            resource_id: id,
            title: article.title,
            excerpt: article.excerpt,
            category: article.category,
            external_link: article.url,
            thumbnail: article.image
          })
        });
        if (resp.ok) {
          alert('Article saved to your dashboard!');
        } else {
          alert('Failed to save article.');
        }
      } catch (e) {
        alert('Error saving article.');
      }
    }

    function shareArticle(id) {
      alert(`Sharing article ${id}...`);
    }

    function openJob(id) {
      alert(`Opening job details for job ${id}...`);
    }

    function applyToJob(id) {
      // Find the job in filteredJobs or jobsData
      const job = (filteredJobs || jobsData || []).find(j => j.id === id);
      if (job && job.url) {
        window.open(job.url, '_blank');
      } else {
        alert('Job application link not found.');
      }
    }

    function saveJob(id) {
      alert(`Job ${id} saved to your favorites!`);
    }

    // Filter change handlers


    document.getElementById('jobLocation').addEventListener('change', function() {
      filteredJobs = [...jobsData];
      performSearch();
    });

    document.getElementById('jobExperience').addEventListener('change', function() {
      filteredJobs = [...jobsData];
      performSearch();
    });

    document.getElementById('jobType').addEventListener('change', function() {
      filteredJobs = [...jobsData];
      performSearch();
    });

    document.getElementById('jobSalary').addEventListener('change', function() {
      filteredJobs = [...jobsData];
      performSearch();
    });

    // Search on Enter key
    document.getElementById('searchInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        performSearch();
      }
    });

    // Initialize the page
    window.addEventListener('load', function() {
      initializeData();
      updateSearchSection();
      updateFilters();
    });
  </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'96efda3e028a17b2',t:'MTc1NTE2ODIyMC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
